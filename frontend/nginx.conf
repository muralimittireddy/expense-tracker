# frontend/nginx.conf
server {
    listen 80; # Listen on port 80 inside the container
    server_name localhost; # Can be adjusted for production domain

    root /usr/share/nginx/html; # Root directory where your built React app is copied
    index index.html index.htm; # Default index files

    # This is the crucial part for SPAs:
    # If a requested file or directory is not found,
    # it serves the index.html, allowing client-side routing to take over.
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Optional: If you want Nginx to proxy API requests to your backend
    # Uncomment and configure if your frontend directly calls /api/ from Nginx
    # location /api/v1/ {
    #     proxy_pass http://backend:8000/api/v1/; # 'backend' is the Docker service name
    #     proxy_set_header Host $host;
    #     proxy_set_header X-Real-IP $remote_addr;
    #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    # }
}
